{"version":3,"file":"js/453.e35c4311.js","mappings":"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","sources":["webpack://poetrymirror/./src/pages/gameIndex.vue","webpack://poetrymirror/./src/pages/gameIndex.vue?36ca"],"sourcesContent":["<template>\r\n  <div class=\"box\">\r\n\r\n    <div>\r\n      <div class=\"tag\">\r\n        <span class=\"Text\"><router-link to=\"/\">返回首页</router-link></span>\r\n      </div>\r\n      <div class=\"yuan\"></div>\r\n    </div>\r\n\r\n    <!-- 标题 -->\r\n    <h1 class=\"title\" id=\"title-ai\">{{ const_variable.title }}</h1>\r\n\r\n    <!-- 匹配界面-->\r\n    <div v-if=\"v_box===1\">\r\n      <!--计时-->\r\n      <div class=\"time-box\">\r\n        <div class=\"time-count\">\r\n          <div class=\"title-2\" v-show=\"!v_show\">{{ const_variable.title_2[0] }}</div>\r\n          <div class=\"title-2\" v-show=\"v_show\">{{ const_variable.title_2[1] }}</div>\r\n          <div class=\"time\">\r\n            <!--            {{ const_variable.time % 60 }}:-->\r\n            {{ Math.floor(const_variable.time / 60) }} :\r\n            {{ const_variable.time % 60 }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--规则-->\r\n      <div class=\"rules\">\r\n        <div class=\"rules-text\">{{ const_variable.rule }}</div>\r\n      </div>\r\n      <!--分割线-->\r\n      <i class=\"dividing-line\"></i>\r\n\r\n      <div class=\"btn-box\">\r\n        <button class=\"btn\" @click=\"matchUser\" v-show=\"!v_show\">开始匹配</button>\r\n        <button class=\"btn\" @click=\"cancelMatch\" v-show=\"v_show\">取消匹配</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!--答题界面-->\r\n    <div v-if=\"v_box===2\">\r\n      <div class=\"question-box\">\r\n        <div class=\"question\">\r\n          <span class=\"count\">{{ time }}</span>\r\n          <div class=\"score\">\r\n            <span class=\"m\">{{ myScore }}</span>\r\n            <span class=\"maohao\">:</span>\r\n            <span class=\"dui\">{{ score }}</span>\r\n          </div>\r\n          <div class=\"q-index\">\r\n            {{ index + 1 }}/10\r\n          </div>\r\n                    <h2>{{ questions[index].name }}</h2>\r\n                    <h4>{{ questions[index].poet }}</h4>\r\n                    <h1>{{ questions[index].question }}</h1>\r\n        </div>\r\n      </div>\r\n      <!--发送栏-->\r\n      <div class=\"send-box\">\r\n        <button class=\"commit\" style=\"margin-right: 50px\" @click=\"preQuestion\">上一题</button>\r\n        <el-input\r\n            class=\"msg\"\r\n            :disabled=\"isDis[index]\"\r\n            v-model=\"value[index]\"\r\n            placeholder=\"在此输入...\"\r\n        />\r\n        <button class=\"commit\" style=\"margin-left: 50px\" @click=\"nextQuestion\">下一题</button>\r\n      </div>\r\n      <button class=\"commit\" style=\"margin-top: 20px\"  @click=\"commit(index)\" :disabled=\"isDis[index]\">提交</button>\r\n    </div>\r\n\r\n    <!--结果界面-->\r\n    <div v-if=\"v_box===3\">\r\n      <!--结果图像-->\r\n      <div class=\"result-box\">\r\n        <div class=\"result-image-victory\" v-show=\"score_show\"></div>\r\n        <div class=\"result-image-fail\" v-show=\"!score_show\"></div>\r\n      </div>\r\n      <!--答题情况-->\r\n      <div class=\"Answers\">\r\n        <!-- 我方情况-->\r\n        <div class=\"left\">\r\n          <span style=\"color: rgb(105, 88, 255)\">我方</span>\r\n          <span>最终分数 : {{ myScore }}</span>\r\n          <span>比赛时间 : {{ Time }}s</span>\r\n        </div>\r\n        <!-- 敌方情况-->\r\n        <div class=\"right\">\r\n          <span style=\"color: rgb(252, 17, 37)\">敌方</span>\r\n          <span>最终分数 : {{ score }}</span>\r\n          <span>比赛时间 : {{ Time }}s</span>\r\n        </div>\r\n      </div>\r\n      <!--分割线-->\r\n      <i class=\"dividing-line\"></i>\r\n      <div class=\"btn-box\">\r\n        <button class=\"btn\" @click=\"matchUser\">再试一次</button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"gameIndex\",\r\n  mounted() {\r\n    //如果为空，则重新连接\r\n    if (this.socket === null)\r\n      this.connect();\r\n  },\r\n  watch: {\r\n    myScore() {\r\n      this.userInPlay();\r\n    },\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      v_box: 1,//界面显示\r\n      v_show: false,//  匹配 | 取消匹配\r\n      const_variable: {\r\n        title: '玩家对战',//标题\r\n        title_2: ['', '匹配中...'],\r\n        time: 0,\r\n        rule: `相同时间内,答题得分高的将获得胜利。需注意，提交错误将会扣除五分,不设上限，请认真思考后再进行提交。`,//规则\r\n      },\r\n      userId: null, //用户id\r\n      socket: null, //套接字连接对象\r\n      socketUrl: \"ws://124.222.182.217:5003/game/match/\", //套接字连接地址\r\n      index: 0, //题目指针\r\n      score: 0, //对手的分数\r\n      myScore: 0, //我的分数\r\n      isDis: new Array(10).fill(false),//禁止输入\r\n      value: [], //用户填写的答案\r\n      questions: [],//题目列表\r\n      score_show: true,//对战结果\r\n      timeout: false,//匹配计数器开关\r\n      time: 0,//答题计数器\r\n      Time: 15,//答题时长\r\n      timeout2: false,//答题计数器开关\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.index = 0;\r\n      this.score = 0;\r\n      this.myScore = 0;\r\n      this.isDis = new Array(10).fill(false);\r\n      this.value = [];\r\n    },\r\n    //上一题\r\n    preQuestion() {\r\n      if (this.index === 0) {\r\n        this.$message.warning(`前面已经没有题目了！`);\r\n      } else this.index--;\r\n    },\r\n    //下一题\r\n    nextQuestion() {\r\n      if (this.index === 9) {\r\n        this.$message.warning(`已经是最后一题了！`);\r\n      } else this.index++;\r\n    },\r\n    //提交答案并验证\r\n    commit(index) {\r\n      if (this.questions[index].ans === this.value[index]) {\r\n        this.$message.success(`true`);\r\n        this.addScore();\r\n        this.isDis[index] = true;\r\n        this.index++;//答案正确自动转向下一题\r\n      } else {\r\n        this.$message.error(`false`);\r\n        this.reduceScore();\r\n      }\r\n    },\r\n    //加分(回答正确)\r\n    addScore() {\r\n      this.myScore = this.myScore + 10;\r\n    },\r\n    //减分(回答错误) (不限次数)\r\n    reduceScore() {\r\n      this.myScore = this.myScore - 5;\r\n    },\r\n    //连接服务端\r\n    connect() {\r\n      // this.userId = 'hzy';\r\n      this.userId = this.UUid();\r\n      let socketUrl = this.socketUrl + this.userId;\r\n      this.socket = new WebSocket(socketUrl);\r\n      //打开事件\r\n      this.socket.onopen = () => {\r\n        console.log(\"websocket 已打开 userId: \" + this.userId);\r\n      };\r\n      //获得消息事件\r\n      this.socket.onmessage = (msg) => {\r\n        let serverMsg = \"收到服务端信息: \" + msg.data;\r\n        console.log(serverMsg);\r\n        let chatMessage = JSON.parse(msg.data)[\"chatMessage\"];\r\n        /**\r\n         * 判断信息类型\r\n         */\r\n        //匹配到对手\r\n        if (chatMessage[\"type\"] === \"MATCH_USER\") {\r\n          //匹配到对手\r\n          // eslint-disable-next-line no-unused-vars\r\n          this.questions = chatMessage[\"data\"][\"questions\"];\r\n          this.$message.success(`已成功为你匹配到对手!`)\r\n          //关闭匹配计数器\r\n          this.timeout = true\r\n          // 重置匹配计数器\r\n          this.const_variable.time = 0;\r\n\r\n          //开启答题计数器\r\n          this.time = this.Time;\r\n          this.timeout2 = false;\r\n          this.counter2();\r\n\r\n          //跳转到答题界面\r\n          this.v_box = 2;\r\n        }\r\n        //(更新分数)\r\n        else if (chatMessage[\"type\"] === \"PLAY_GAME\") {\r\n          this.score = chatMessage[\"data\"][\"score\"];\r\n        }\r\n        //游戏结束\r\n        else if (chatMessage[\"type\"] === \"GAME_OVER\") {\r\n          console.log(`游戏结束!`)\r\n          if (this.myScore > this.score) {\r\n            this.v_box = 3;\r\n            this.score_show = true;\r\n          } else if (this.myScore < this.score) {\r\n            this.v_box = 3;\r\n            this.score_show = false;\r\n          } else {\r\n            this.v_box = 3;\r\n            this.score_show = true;\r\n          }\r\n        }\r\n      };\r\n      //关闭事件\r\n      this.socket.onclose = () => {\r\n        console.log(\"websocket 已关闭 userId: \" + this.userId);\r\n        this.socket = null;\r\n      };\r\n      //发生了错误事件\r\n      this.socket.onerror = () => {\r\n        console.log(\"websocket 发生了错误 userId : \" + this.userId);\r\n        //重新链接\r\n        console.log(`重新链接`);\r\n        this.connect();\r\n      };\r\n    },\r\n    // 随机匹配\r\n    matchUser() {\r\n\r\n      //开启计数器\r\n      this.timeout = false;\r\n      this.counter();\r\n\r\n      if (this.socket === null) {\r\n        this.$message.error(`与服务器连接断开，请刷新页面...`);\r\n      }\r\n\r\n      this.v_show = !this.v_show;\r\n\r\n      this.isGameing = 2;\r\n      this.$message.info(`开始匹配......`);\r\n      let chatMessage = {};\r\n      let sender = this.userId;\r\n      let type = \"MATCH_USER\";\r\n      chatMessage.sender = sender;\r\n      chatMessage.type = type;\r\n      console.log(\"用户:\" + sender + \"开始匹配......\");\r\n      this.socket.send(JSON.stringify(chatMessage));\r\n    },\r\n    // 取消匹配\r\n    cancelMatch() {\r\n      //停止计数器，并重置\r\n      this.timeout = true;\r\n      this.const_variable.time = 0;\r\n\r\n      if (this.socket === null) {\r\n        this.$message.error(`与服务器连接断开，请刷新页面...`);\r\n      }\r\n      this.v_show = !this.v_show;\r\n\r\n      this.$message.info(`取消匹配......`);\r\n      let chatMessage = {};\r\n      let sender = this.userId;\r\n      let type = \"CANCEL_MATCH\";\r\n      chatMessage.sender = sender;\r\n      chatMessage.type = type;\r\n      console.log(\"用户:\" + sender + \"取消匹配......\");\r\n      this.socket.send(JSON.stringify(chatMessage));\r\n    },\r\n    // 游戏中(更新分数)\r\n    userInPlay() {\r\n      let chatMessage = {};\r\n      let sender = this.userId;\r\n      // let data = $(\"#newScoreInput\").val();\r\n      let data = this.myScore; //TODO\r\n      let type = \"PLAY_GAME\";\r\n      chatMessage.sender = sender;\r\n      chatMessage.data = data;\r\n      chatMessage.type = type;\r\n      console.log(\"用户:\" + sender + \"更新分数为\" + data);\r\n      this.socket.send(JSON.stringify(chatMessage));\r\n\r\n    },\r\n    // 游戏结束\r\n    gameOver() {\r\n\r\n      let chatMessage = {};\r\n      let sender = this.userId;\r\n      let type = \"GAME_OVER\";\r\n      chatMessage.sender = sender;\r\n      chatMessage.type = type;\r\n      console.log(\"用户:\" + sender + \"结束游戏\");\r\n      this.socket.send(JSON.stringify(chatMessage));\r\n    },\r\n    //获取UUID\r\n    UUid() {\r\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\r\n          /[xy]/g,\r\n          function (c) {\r\n            let r = (Math.random() * 16) | 0,\r\n                v = c == \"x\" ? r : (r & 0x3) | 0x8;\r\n            return v.toString(16);\r\n          }\r\n      );\r\n    },\r\n    //匹配时间计数器\r\n    counter() {\r\n      // console.log(this.timeout);\r\n      if (this.timeout) return;\r\n      this.const_variable.time = this.const_variable.time + 1;\r\n      return setTimeout(this.counter, 1000); //counter,延时递归调用自己,1000为间隔调用时间,单位毫秒\r\n    },\r\n    //  答题时间计数器\r\n    counter2() {\r\n      // console.log(this.timeout2);\r\n      if (this.timeout2) return;\r\n      this.time = this.time - 1;\r\n      if (this.time === 0) {\r\n        this.timeout2 = true;\r\n        this.gameOver();\r\n      }\r\n      return setTimeout(this.counter2, 1000); //counter,延时递归调用自己,1000为间隔调用时间,单位毫秒\r\n    },\r\n  },\r\n  unmounted() {\r\n    this.gameOver();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.box {\r\n  width: 1220px;\r\n  min-height: 500px;\r\n  background-color: rgba(255, 255, 255, 0.7);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.box {\r\n  position: relative;\r\n  margin: -375px auto 100px;\r\n  padding: 30px 60px 100px;\r\n\r\n}\r\n\r\n.tag .Text {\r\n  font-family: \"Microsoft YaHei\", serif;\r\n  font-weight: bold;\r\n  font-size: 22px;\r\n  line-height: 50px;\r\n}\r\n\r\n.tag,\r\n.yuan {\r\n  position: absolute;\r\n  height: 50px;\r\n  background-color: rgba(255, 255, 255, 0.7);\r\n  top: -50px;\r\n  left: 0;\r\n}\r\n\r\n.tag {\r\n  width: 160px;\r\n}\r\n\r\n.yuan {\r\n  width: 50px;\r\n  left: 160px;\r\n  border-top-right-radius: 100%;\r\n}\r\n\r\n.dividing-line {\r\n  display: block;\r\n  width: 906px;\r\n  height: 8px;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translate(-50%, 0);\r\n  background-repeat: no-repeat;\r\n  background-size: 100%;\r\n  background-image: url(../assets/images/deadline.png);\r\n}\r\n\r\n.title {\r\n  font-family: \"font2\", Courier, monospace;\r\n  font-size: 80px;\r\n  font-weight: 400;\r\n}\r\n\r\n.time-box {\r\n  margin-top: 60px;\r\n  position: relative;\r\n}\r\n\r\n.time-count {\r\n  width: 300px;\r\n  height: 300px;\r\n  border-radius: 50%;\r\n  border: 3px solid #d9d9d9;\r\n}\r\n\r\n.time-count {\r\n  margin: 0 auto;\r\n}\r\n\r\n\r\n.title-2 {\r\n  margin-top: 40px;\r\n  font-size: 36px;\r\n  /*color: #d9d9d9;*/\r\n}\r\n\r\n.time {\r\n  font-size: 45px;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n\r\n\r\n.rules {\r\n  margin: 40px 0 30px;\r\n}\r\n\r\n.rules-text {\r\n  width: 70%;\r\n  padding: 20px;\r\n  text-align: left;\r\n  font-size: 22px;\r\n  font-weight: bold;\r\n}\r\n\r\n.rules-text {\r\n  position: relative;\r\n  left: 50%;\r\n  transform: translate(-50%, 0);\r\n  letter-spacing: 2px;\r\n}\r\n\r\n.btn-box {\r\n  margin-top: 60px;\r\n}\r\n\r\n.btn {\r\n  height: 60px;\r\n  width: 200px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  background-color: rgb(93, 126, 131);\r\n  font-size: 24px;\r\n  color: #ffffff;\r\n  cursor: pointer;\r\n}\r\n\r\n.question-box {\r\n  margin-top: 30px;\r\n}\r\n\r\n.question {\r\n  padding: 20px 0 20px;\r\n  margin: 0 auto;\r\n  width: 80%;\r\n  height: 200px;\r\n  background-color: rgba(253, 247, 209, .8);\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.question {\r\n  position: relative;\r\n}\r\n\r\n.question h2, .question h4 {\r\n  margin-top: 8px;\r\n}\r\n\r\n.question h1 {\r\n  margin-top: 15px;\r\n}\r\n\r\n.score {\r\n  position: absolute;\r\n  font-size: 24px;\r\n  right: 10px;\r\n  top: 10px;\r\n}\r\n\r\n.maohao {\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  color: rgba(0, 0, 0, .7);\r\n  font-weight: bold;\r\n}\r\n\r\n\r\n.send-box {\r\n  margin-top: 50px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n\r\n.msg {\r\n  width: 500px;\r\n  height: 60px;\r\n  box-sizing: border-box;\r\n  /*padding: 10px;*/\r\n  font-size: 18px;\r\n\r\n}\r\n\r\n\r\n.msg {\r\n  position: relative;\r\n  /*transform: translateX(60px);*/\r\n}\r\n\r\n.commit {\r\n  height: 60px;\r\n  width: 130px;\r\n  border: 0;\r\n  border-radius: 8px;\r\n  color: white;\r\n  font-size: 24px;\r\n  background-color: rgb(93, 126, 131);\r\n  cursor: pointer;\r\n}\r\n\r\n.commit {\r\n  /*margin-left: 100px;*/\r\n}\r\n\r\n\r\n.send-box >>> input {\r\n  height: 60px;\r\n  width: 500px;\r\n}\r\n\r\n.q-index {\r\n  position: absolute;\r\n  left: 10px;\r\n  top: 10px;\r\n}\r\n\r\n.result-box {\r\n  position: relative;\r\n  margin-top: 60px;\r\n  height: 300px;\r\n  background-image: url(../assets/images/im4.png);\r\n  background-repeat: no-repeat;\r\n  background-size: 300px 300px;\r\n  background-position: center center;\r\n}\r\n\r\n.result-image-victory, .result-image-fail {\r\n  height: 160px;\r\n  width: 160px;\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-repeat: no-repeat;\r\n  background-size: 100% auto;\r\n  background-position: center center;\r\n}\r\n\r\n.result-image-victory {\r\n  background-image: url(../assets/images/im5.png);\r\n}\r\n\r\n.result-image-fail {\r\n  background-image: url(../assets/images/im6.png);\r\n}\r\n\r\n.Answers {\r\n  margin-top: 60px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.Answers > .left {\r\n  text-align: left;\r\n}\r\n\r\n.Answers > .right {\r\n  text-align: right;\r\n}\r\n\r\n.Answers span {\r\n  display: block;\r\n  font-size: 24px;\r\n  line-height: 33px;\r\n}\r\n\r\n.dividing-line {\r\n  margin-top: 30px;\r\n  display: block;\r\n  width: 800px;\r\n  height: 8px;\r\n  position: relative;\r\n  left: 50%;\r\n  transform: translate(-50%, 0);\r\n  background-repeat: no-repeat;\r\n  background-size: 100%;\r\n  background-image: url(../assets/images/deadline.png);\r\n}\r\n\r\n.count {\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n}\r\n</style>\r\n","import { render } from \"./gameIndex.vue?vue&type=template&id=18c91b50&scoped=true\"\nimport script from \"./gameIndex.vue?vue&type=script&lang=js\"\nexport * from \"./gameIndex.vue?vue&type=script&lang=js\"\n\nimport \"./gameIndex.vue?vue&type=style&index=0&id=18c91b50&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Desktop\\\\poetrymirror\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-18c91b50\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","style","_createElementBlock","_createVNode","_component_router_link","to","_hoisted_5","_toDisplayString","$data","title","_hoisted_7","title_2","Math","floor","time","rule","_hoisted_13","onClick","$options","_hoisted_15","_hoisted_21","name","poet","question","_component_el_input","disabled","$event","placeholder","_hoisted_25","_hoisted_26","_hoisted_32","_hoisted_34","_hoisted_35","mounted","this","socket","connect","watch","myScore","userInPlay","data","v_box","v_show","const_variable","userId","socketUrl","index","score","isDis","Array","fill","value","questions","score_show","timeout","Time","timeout2","methods","init","preQuestion","$message","warning","nextQuestion","commit","ans","success","addScore","error","reduceScore","UUid","WebSocket","onopen","console","log","onmessage","msg","serverMsg","chatMessage","JSON","parse","counter2","onclose","onerror","matchUser","counter","isGameing","info","sender","type","send","stringify","cancelMatch","gameOver","replace","c","r","random","v","toString","setTimeout","unmounted","__exports__","render"],"sourceRoot":""}