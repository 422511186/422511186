"use strict";(self["webpackChunkpoetrymirror"]=self["webpackChunkpoetrymirror"]||[]).push([[623],{1623:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var s=a(6252),l=a(3577),i=a(9963);const n=e=>((0,s.dD)("data-v-42e63c02"),e=e(),(0,s.Cn)(),e),o={class:"box"},r={class:"tag"},p={class:"Text"},d=(0,s.Uk)("返回首页"),c=n((()=>(0,s._)("div",{class:"yuan"},null,-1))),h=n((()=>(0,s._)("h1",{class:"title",id:"title-for"},"诗人名录",-1))),u={class:"tags"},g=["onClick"],y={class:"input-btn"},m=n((()=>(0,s._)("span",{class:"text"},"搜索",-1))),v=[m],_=n((()=>(0,s._)("div",null,[(0,s._)("i",{class:"dividing-line",id:"start"})],-1))),w={class:"poets"},k={class:"title"},C={class:"poet"},z=["innerHTML"],A=["onClick"],V=["onClick"],f={class:"pagination"};function b(e,t,a,n,m,b){const P=(0,s.up)("router-link"),x=(0,s.up)("el-input"),D=(0,s.up)("el-pagination");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",null,[(0,s._)("div",r,[(0,s._)("span",p,[(0,s.Wm)(P,{to:"/"},{default:(0,s.w5)((()=>[d])),_:1})])]),c]),h,(0,s._)("nav",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.tags,((e,t)=>((0,s.wg)(),(0,s.iD)("span",{class:(0,l.C_)(["item",t===m.typeValue?"checked":""]),key:t,onClick:e=>b.getPoets(t)},(0,l.zw)(e),11,g)))),128))]),(0,s._)("div",y,[(0,s.Wm)(x,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),placeholder:"请输入..."},null,8,["modelValue"]),(0,s._)("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>b.search&&b.search(...e))},v)]),_,(0,s._)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.poets,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"drop-shadow",key:t},[(0,s._)("h2",k,(0,l.zw)(e["name"]),1),(0,s._)("h3",C,(0,l.zw)(e["dynasty"]),1),(0,s._)("div",{class:(0,l.C_)(["content",m.displayAll[t]]),innerHTML:e["desc"]+"<br>"+e["content"]},null,10,z),(0,s.wy)((0,s._)("div",{class:"more",onClick:e=>b.more(t)},"展开",8,A),[[i.F8,""===m.displayAll[t]]]),(0,s.wy)((0,s._)("div",{class:"reduce",onClick:e=>b.reduce(t)},"收起",8,V),[[i.F8,""!==m.displayAll[t]]])])))),128)),(0,s._)("div",f,[(0,s.Wm)(D,{class:"pagination-1","hide-on-single-page":m.hidePage,"current-page":m.page,"onUpdate:current-page":t[2]||(t[2]=e=>m.page=e),"page-size":m.size,"onUpdate:page-size":t[3]||(t[3]=e=>m.size=e),background:"",layout:"prev, pager, next",total:m.len,"onUpdate:total":t[4]||(t[4]=e=>m.len=e),onCurrentChange:b.changeClick},null,8,["hide-on-single-page","current-page","page-size","total","onCurrentChange"])])])])}var P=a(4002),x={name:"poetsList",data(){return{hidePage:!1,displayAll:new Array(this.size).fill(""),value:"",typeValue:-1,tags:["全部","先秦","五代","魏晋","南北朝","两汉","唐代","宋代","元代","明代","清代","现实主义","浪漫主义","建安七子","竹林七贤","初唐四杰","婉约派","豪放派","山水诗派","田园诗派","边塞诗派"],page:1,len:0,size:3,poets:[]}},mounted(){P.Z.emit("bus",!1);let e=this.$route.params.data;void 0!==e?(this.poets=JSON.parse(e).data,this.len=JSON.parse(e).totalLen,this.displayAll=new Array(this.size).fill("")):(this.typeValue=0,this.getPoets(0)),this.hidePage=!0},unmounted(){P.Z.emit("bus",!0)},methods:{more(e){this.displayAll[e]="displayAll"},reduce(e){this.displayAll[e]=""},changeClick(){-1!==this.typeValue?this.getPoets(this.typeValue).then((()=>{document.getElementById("start").scrollIntoView()})):this.search().then((()=>{document.getElementById("start").scrollIntoView()}))},async search(){-1!==this.typeValue&&(this.page=1),this.typeValue=-1,await this.$axios({url:"/api/multiPoet/",method:"get",params:{style:this.value,page:this.page,size:this.size}}).then((e=>{this.poets=e.data.data,this.len=e.data.totalLen,this.displayAll=new Array(this.size).fill("")})).catch((()=>{this.$message.error("请求出现错误...")}))},async getPoets(e){this.typeValue!==e&&(this.typeValue=e,this.page=1),await this.$axios({url:"/api/multiPoet/",method:"get",params:{style:this.tags[e],page:this.page,size:this.size}}).then((e=>{this.poets=e.data.data,this.len=e.data["totalLen"],this.displayAll=new Array(this.size).fill("")})).catch((()=>{this.$message.error("请求出现错误...")}))}}},D=a(3744);const L=(0,D.Z)(x,[["render",b],["__scopeId","data-v-42e63c02"]]);var I=L}}]);
//# sourceMappingURL=623.d564f1c9.js.map